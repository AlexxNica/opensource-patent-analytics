{
    "contents" : "---\ntitle: \"Wipo Technology Trends\"\nauthor: \"Paul Oldham\"\ndate: \"24 June 2015\"\noutput: html_document\n---\nDraft\n\nIn this article we use WIPO patent data on patent grants by technology trends to graph and map patent data. \n\nAs a starting point the WIPO data we will be using features in the WIPO annual statistic report and can be downloaded here. \n\nIn practice the original data required some tidying to make it easier to work with in R. A full description of the tidying steps is provided in the [code book]() but we will illustrate some of the points here. \n\nThe WIPO data describes trends in patent grants by technology areas based on whether the recipients are resident or non-residents. The data is also broken down by country, region and instrument (run by regional offices) in a column called offices and finally by income category. All of these different groupings are located in a column called office. \n\nThe principle behind tidy data is that each cell should contain a single value and each column should contain a single variable. To address this we\n\n1. Divided the original technology field containing entries such as `1 - Electrical machinery, apparatus, energy` into a numeric technology_number and then technology field. \n2. The original `office` field contains data describing countries, regional offices, regions and income groupings. To address these mixed categories and levels we added a column called `type` that allows the data to be selected later based on:\n\na) country (geographic)\nb) region (geographic)\nc) instrument (for regional patent offices established under a regional instrument)\nd) income (high, middle income, low etc.)\n\nFollowing this basic pre-tidying the data can be imported into R using the `readr` package.  \n\n```{r}\nwipotech <- read_csv(\"/Users/pauloldham17inch/opensource-patent-analytics/2_datasets2/wipo_patents_technology/wipo_grants_techology.csv\")\n```\n\nOnce the data has been read in it can be inspected\n\n```{r}\nstr(wipotech)\n```\n\nThis produces a report that there are 5920 observations and 42 variables (columns). We can also see that the years are divided into separate columns. Life would be easier if they could be gathered into two columns, one for the year and one with the value for the given year. This will turn the table from being wide, into long. To do that we will use the `gather()` function from the `tidyr` package. \n\n```{r}\nwipotech <- gather(wipotech, year, count, 8:41)\n```\n\nThe result is a new table with 9 columns and 201,280 observations. \n\nWhat we would not want to do with this data is to try and sum it. The reason is that it contains a variety of groupings such as regions and income that are summaries of the country and instrument data.\n\nTo do this we can use the `filter()` function from the `dplyr` package. This allows us to select the data we would like by row. \n\nfilter by type\n```{r}\ntechcountry <- filter(wipotech, type == \"Country\")\n```\n\nWhile we are here, we can create separate data frames for the region and instrument, and income. \n\n```{r}\ntechincome <- filter(wipotech, type == \"Income\")\n```\n\nFinally, let's do the regions and combine them with the regional instruments (Instruments).\n\n```{r}\ntechregion <- filter(wipotech, type == c(\"Region\", \"Instrument\"))\n```\n\n```{r}\ntechregion1 <- filter(wipotech, type == \"Region\")\n```\n\n\n\nWe now have three data tables that contain the correct information for further work while avoiding potential disasters.\n\nWe now want to visualise and map this data. For that we will start by turning to the quick plot or `qplot` function in `ggplot2`. \n\n```{r}\ninstall.packages(\"ggplot2\")\n```\n\nand  \n\n```{r}\nlibrary(ggplot2)\n```\n\n",
    "created" : 1435229257501.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3849149575",
    "id" : "B0697E4C",
    "lastKnownWriteTime" : 1435692959,
    "path" : "~/opensource-patent-analytics/2_datasets2/wipo_patents_technology/wipo_technology_trends.Rmd",
    "project_path" : "wipo_technology_trends.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_markdown"
}